{% extends 'users/base.html' %}
{% load user_filters %}
{% load user_tags %}

{% block title %}Demostración de Tags y Filtros Personalizados{% endblock %}

{% block header %}Tags y Filtros Personalizados en Django{% endblock %}

{% block extra_css %}
<style>
    .example {
        background-color: #f0f8ff;
        border-left: 4px solid #007bff;
        padding: 10px 15px;
        margin: 15px 0;
    }
    .category {
        margin-top: 25px;
        border-bottom: 1px solid #ddd;
        padding-bottom: 5px;
    }
    code {
        background-color: #f5f5f5;
        padding: 2px 5px;
        border-radius: 3px;
        font-family: monospace;
    }
    .result {
        font-weight: bold;
        color: #d63384;
    }
    .par {
        background-color: #e9ecef;
    }
    .impar {
        background-color: #f8f9fa;
    }
</style>
{% endblock %}

{% block content %}
    <h2>Demostración de Filtros y Tags Personalizados</h2>
    <p>Esta página muestra cómo implementar y usar filtros y tags personalizados en Django.</p>

    <!-- 1. Filtros Personalizados -->
    <div class="category">
        <h3>1. Filtros Personalizados</h3>
        
        <div class="example">
            <h4>1.1. Filtro 'saludo'</h4>
            <p><code>{{ nombre|saludo }}</code> → <span class="result">{{ nombre|saludo }}</span></p>
            
            <h4>1.2. Filtro 'multiplicar'</h4>
            <p><code>{{ 5|multiplicar:3 }}</code> → <span class="result">{{ 5|multiplicar:3 }}</span></p>
            
            <h4>1.3. Filtro 'primera_palabra'</h4>
            <p><code>{{ "Hola mundo cruel"|primera_palabra }}</code> → <span class="result">{{ "Hola mundo cruel"|primera_palabra }}</span></p>
            
            <h4>1.4. Filtro 'rango'</h4>
            <p>Ejemplo de rango (1 al 5):</p>
            <ul>
                {% for i in 5|rango %}
                    <li class="{{ i|clase_par_impar }}">Elemento {{ i }}</li>
                {% endfor %}
            </ul>
            
            <h4>1.5. Filtro 'clase_par_impar'</h4>
            <p>En el ejemplo anterior se usó este filtro para asignar clases CSS diferentes a elementos pares e impares.</p>
        </div>
    </div>

    <!-- 2. Simple Tags -->
    <div class="category">
        <h3>2. Simple Tags</h3>
        
        <div class="example">
            <h4>2.1. Tag 'fecha_actual'</h4>
            <p><code>{% verbatim %}{% fecha_actual %}{% endverbatim %}</code> → <span class="result">{% fecha_actual %}</span></p>
            <p><code>{% verbatim %}{% fecha_actual "%Y-%m-%d" %}{% endverbatim %}</code> → <span class="result">{% fecha_actual "%Y-%m-%d" %}</span></p>
            
            <h4>2.2. Tag 'combinar_strings'</h4>
            <p><code>{% verbatim %}{% combinar_strings "Django" "Templates" %}{% endverbatim %}</code> → <span class="result">{% combinar_strings "Django" "Templates" %}</span></p>
            <p><code>{% verbatim %}{% combinar_strings "Django" "Templates" "-" %}{% endverbatim %}</code> → <span class="result">{% combinar_strings "Django" "Templates" "-" %}</span></p>
        </div>
    </div>

    <!-- 3. Inclusion Tags -->
    <div class="category">
        <h3>3. Inclusion Tags</h3>
        
        <div class="example">
            <h4>3.1. Tag 'lista_numerada'</h4>
            <p>Ejemplo de lista numerada sin título:</p>
            {% lista_numerada frutas %}
            
            <p>Ejemplo de lista numerada con título:</p>
            {% lista_numerada colores "Colores disponibles" %}
        </div>
    </div>

    <!-- 4. Custom Template Tags con Nodos -->
    <div class="category">
        <h3>4. Custom Template Tags con Nodos</h3>
        
        <div class="example">
            <h4>4.1. Tag 'upper_block'</h4>
            <p>Texto normal fuera del bloque.</p>
            
            {% upper_block %}
            Este texto aparecerá completamente en mayúsculas.
            Incluso si tiene varias líneas o incluye {{ nombre }}.
            {% end_upper_block %}
            
            <h4>4.2. Tag 'repeat'</h4>
            
            {% repeat 3 %}
            <p>Este párrafo se repetirá 3 veces.</p>
            {% endrepeat %}
        </div>
    </div>

    <!-- 5. Cómo implementar Tags y Filtros -->
    <div class="category">
        <h3>5. Cómo implementar Tags y Filtros</h3>
        
        <div class="example">
            <h4>5.1. Estructura de directorios</h4>
            <pre>
users/
  ├── templatetags/
  │   ├── __init__.py
  │   ├── user_filters.py
  │   └── user_tags.py
  └── templates/
      └── users/
          └── partials/
              └── lista_numerada.html
            </pre>
            
            <h4>5.2. Cargar los tags y filtros</h4>
            <p>Para usar los tags y filtros personalizados, primero debes cargarlos:</p>
            <code>{% verbatim %}{% load user_filters %}{% endverbatim %}</code><br>
            <code>{% verbatim %}{% load user_tags %}{% endverbatim %}</code>
        </div>
    </div>
{% endblock %} 